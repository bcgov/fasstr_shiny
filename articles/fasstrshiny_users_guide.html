<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fasstrshiny Users Guide • fasstrshiny</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="fasstrshiny Users Guide">
<meta property="og:description" content="fasstrshiny">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstrshiny</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/fasstrshiny_get_started.html">Get Started</a>
</li>
<li>
  <a href="../articles/fasstrshiny_users_guide.html">User Guide</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bcgov/fasstrshiny" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="fasstrshiny_users_guide_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>fasstrshiny Users Guide</h1>
            
      
      
      <div class="hidden name"><code>fasstrshiny_users_guide.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="fasstrshiny">fasstrshiny<a class="anchor" aria-label="anchor" href="#fasstrshiny"></a>
</h2>
<ul>
<li>what is it</li>
<li>R package</li>
</ul>
<div class="section level3">
<h3 id="loading-online">Loading Online<a class="anchor" aria-label="anchor" href="#loading-online"></a>
</h3>
<p>Visit <a href="https://bcgov-env.shinyapps.io/fasstrshiny/" class="external-link uri">https://bcgov-env.shinyapps.io/fasstrshiny/</a></p>
<p><strong>Pros</strong></p>
<ul>
<li>No need to install R or <code>fasstrshiny</code>!</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>Slower</li>
<li>Bookmarking uses urls which can be very long</li>
<li>Won’t be learning any new R :(</li>
</ul>
</div>
<div class="section level3">
<h3 id="loading-locally">Loading Locally<a class="anchor" aria-label="anchor" href="#loading-locally"></a>
</h3>
<p>To install, in the R console run the following (this needs to be done <strong>once</strong>)</p>
<pre><code><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"bcgov/fasstrshiny"</span><span class="op">)</span></code></pre>
<p>To use HYDAT data in the app, the Environment and Climate Change Canada’s HYDAT database must be downloaded (this needs to be done <strong>once</strong> or as needed to update):</p>
<pre><code><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/download_hydat.html" class="external-link">download_hydat</a></span><span class="op">(</span><span class="op">)</span></code></pre>
<p>To the Shiny App run, in the R console, run the following (this needs to be done <strong>everytime</strong>):</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bcgov.github.io/fasstrshiny">fasstrshiny</a></span><span class="op">)</span> <span class="co"># Loads the package</span>
<span class="fu"><a href="../reference/fasstr_shiny.html">fasstr_shiny</a></span><span class="op">(</span><span class="op">)</span>       <span class="co"># Launches the Shiny App</span></code></pre>
<p><strong>Pros</strong></p>
<ul>
<li>Faster</li>
<li>Bookmarking uses local files so urls are simpler</li>
<li>As you’re working in R already, it’s easier to start using the <code>fasstr</code> code output by the Shiny App to learn more!</li>
</ul>
<p><strong>Cons</strong></p>
<ul>
<li>You need to install R, RStudio (optional but recommended), and the <code>fasstrshiny</code> package</li>
<li>Working locally means that your system setup may occasionally create unique problems that are tricky to trouble shoot (when in doubt, update all your packages: <code>remotes::update_packages()</code>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-disclaimers">Data Disclaimers<a class="anchor" aria-label="anchor" href="#data-disclaimers"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="layout-and-navigation">Layout and Navigation<a class="anchor" aria-label="anchor" href="#layout-and-navigation"></a>
</h2>
<p>Side bar - Navigate through the different pages on the left sidebar - can close to make more space by clicking 3 bars beside fasstr shiny title</p>
<p>Within page, there are multiple tabs and a sidebar with explanation and data options for the page. For most pages, will be a sidebar with data options for entire page (some exceptions), tab for plotting results, tab for table of results</p>
<div class="section level3">
<h3 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h3>
<ul>
<li>Tables to view data, statistics, and results.</li>
<li>Usually in the ‘Table’ tab for specific analysis pages, but dispersed throughout where appropriate.</li>
<li>Most will have a ‘Copy’ button that will copy the entire table to the clipboard for you to paste in another spreadsheet or document. The table can also be saved as a .csv or .xlsx file with the ‘CSV’ and ‘Excel’ buttons.</li>
<li>Can sort rows by clicking on the column header and filter rows for selected variables or values in the boxes below the headers.</li>
<li>Some tables may have a gear-box above and to the right for more options.</li>
<li>Tables built using the DT package.</li>
</ul>
</div>
<div class="section level3">
<h3 id="plots">Plots<a class="anchor" aria-label="anchor" href="#plots"></a>
</h3>
<ul>
<li>Plots to view, explore data, statistics and results.</li>
<li>Usually in the ‘Plot’ tab for specific analysis pages, but dispersed throughout where appropriate.</li>
<li>2 different plot types for exploring data.</li>
<li>One type is for the daily flow data on the Data &gt;&gt; Loading and Data &gt;&gt; Screening tabs to be able to zoom in and out and explore the data. Can zoom by clicking and dragging horizontally to zoom between dates, vertically to zoom between flow levels, or diagonally to create and box and zoom in around data. Double click within the plot to reset the scale (or click the button in the top right). Cave save using the button in the top right Using plotly.</li>
<li>The other type, most graphs, most ggiraph</li>
<li>plotly - can zoom, others</li>
</ul>
</div>
<div class="section level3">
<h3 id="r-code">R Code<a class="anchor" aria-label="anchor" href="#r-code"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="home">Home<a class="anchor" aria-label="anchor" href="#home"></a>
</h2>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="section level3">
<h3 id="loading">Loading<a class="anchor" aria-label="anchor" href="#loading"></a>
</h3>
<p>The first thing you’ll need to do is load some daily streamflow data. Go to <strong>Data &gt;&gt; Loading &amp; Options</strong>. Here you can choose whether to load HYDAT data or your own local data from a .csv file format.</p>
<div class="section level4">
<h4 id="canadian-hydat-data">Canadian HYDAT Data<a class="anchor" aria-label="anchor" href="#canadian-hydat-data"></a>
</h4>
<p>The map shows all the HYDAT stations in BC. To look at all of Canada, toggle the “BC Stations Only” switch. Hover over stations for more information, click on a station to select that station. Below the map is a table of HYDAT stations. You can filter stations by typing into the box above each column. As you filter the stations list, the map will update to show only the stations you’ve filtered. Once you’ve decided on a station, make sure it is selected in the panel on the left and click the “Load Data” button. You can now preview the data on the “Daily Flow Plot” and “Daily Flow Table” tabs.</p>
<p>If there is missing data between the start and end of the period of record, a note in red text will pop up below this section. Missing data may cause plots or tables to have gaps throughout the app. To manage how to deal with missing dates, see the ‘handling Missing Dates’ options at the bottom of the options.</p>
</div>
<div class="section level4">
<h4 id="local-data">Local Data<a class="anchor" aria-label="anchor" href="#local-data"></a>
</h4>
<p>Click on the CSV button to change the data source to local csv. Your data must be in csv format with at least two columns: one for the date, and one for the flow value (in cms). Click on the “Browse” button to locate your file. You can preview the file on the right. Make sure the Date and Flow columns are correctly identified. If you have a Symbol column (with daily flow qualifers, Estimate, Partial day etc.) you can add that as well, otherwise leave that entry blank. If you know the basin area for your data, add it to under “Station Information”. Click “Load Data”.</p>
<p>If your dates are not standardized (YYYY-MM-DD) or if you have more than one flow value per date, you will be warned and will have to fix your data before it can be loaded.</p>
<p>You can now preview the data on the “Daily Flow Plot” and “Daily Flow Table” tabs.</p>
<p>If there is missing data between the start and end of the period of record, a note in red text will pop up below this section. Missing data may cause plots or tables to have gaps throughout the app. To manage how to deal with missing dates, see the ‘handling Missing Dates’ options at the bottom of the options.</p>
</div>
<div class="section level4">
<h4 id="station-information">Station Information<a class="anchor" aria-label="anchor" href="#station-information"></a>
</h4>
<p>Click this toggle to view and/or change the station name (used for titles throughout the app) and the upstream basin area, in square kilometres (used for area-based runoff calculations). When using HYDAT data, these will default to the provided HYDAT information, but can be modified as necessary.</p>
</div>
</div>
<div class="section level3">
<h3 id="options-and-date-filtering">Options and Date Filtering<a class="anchor" aria-label="anchor" href="#options-and-date-filtering"></a>
</h3>
<p>Below the Load Station Data and Station Information (can click the toggles to close), explore data and date settings to customize the station information, filter your dates, adjust the types of data you’re using or handle missing dates differently (also see the section below, <strong>Data</strong> <strong>Options</strong>). These options will also be shown in the sidebar on the left below all the tab selections for viewing throughout the app. Options sections:</p>
<ul>
<li>
<strong>Flow Averaging and Units</strong>
<ul>
<li><p>Change the duration of the daily data by averaging sequential daily data (ie. 7-day rolling average); alignment will determine where the date of rolling average will align (‘right’ = last of n-days, ‘left’ = first of n-days, and ‘centre’ = middle of n-days). These correspond to the ‘roll_days’ and ‘roll_align’ arguments found in the</p></li>
<li><p>Convert the daily cubic metres per second data into a daily volumetric (cubic metres) or a daily runoff yield (millimetres depth; requires an upstream basin area) before calculating statistics and plots.</p></li>
</ul>
</li>
<li>
<strong>Years and Months</strong>
<ul>
<li>Select the starting month of the your water year. Typically January for following calendar years or October for typical water years. Other months may be used to designate start of water years for other purposes</li>
<li>Select the months to include in the analyses. If looking just for summer months from July through September, for example, move the slider ends to that range of months.</li>
<li>Select the start and end years of the analysis. Certain time periods of interest or data availability or quality may influence start and end years.</li>
<li>Select any years to remove from the analysis. There may be years or poor data quality, data availability, outliers, or other factors that may exist to remove specific years.</li>
</ul>
</li>
<li>
<strong>Handling Missing Dates</strong>
<ul>
<li><p>Filter the flow data set for only those years which have complete data (no missing values). By toggling this, it will change the Start/End years slider to the first and last years of complete data and will add any years with complete data between those years into Years to Exclude box.</p></li>
<li><p>If complete years are not require, choose to ignore any missing values and calculate statistics for a given time period regardless of any missing dates. This will move the ‘Allowed Missing’ slider to jump to 100% below, select the percent allowed missing values per period below.</p></li>
<li><p>Adjust the percent of allowed missing values per time period (months, years). If 100%, statistics will be calculated regardless of the number of missing values (i.e. even if 1 good value per year or month). If 25%, statistics will be calculated if there is if 25% or less missing data per period (at least 75% non-missing values). If set to 0%, then no statistics will be calculated per period if there is missing data.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="availability-screening">Availability &amp; Screening<a class="anchor" aria-label="anchor" href="#availability-screening"></a>
</h3>
<p>Now that you’ve loaded your data, you’ll want review your data and screen the data for data availability (missing dates) and data quality (data qualifiers/symbols or outliers). Click on <strong>Data &gt;&gt; Availability &amp; Screening</strong> to view these plots and tables.</p>
<p>This section contains several different plots and tables for exploring your data:</p>
<ul>
<li>
<strong>Daily Symbols Flow Plot</strong>
<ul>
<li>Interactive plot for exploring daily flow values with their identified symbols/data qualifiers. If using HYDAT data, these symbols will follow those provided by HYDAT (e.g. E, B, A, etc.).</li>
<li>fasstr function: <a href="https://bcgov.github.io/fasstr/reference/plot_flow_data_symbols.html" class="external-link"><code>plot_flow_data_symbols()</code></a>.</li>
</ul>
</li>
<li>
<strong>Annual Symbols Plot</strong>
<ul>
<li>Annual summary of the daily flow symbols/qualifiers. Can show symbols data by days of years for each year or show annual totals (as percent or counts of days) for each year.</li>
<li>fasstr function: <a href="https://bcgov.github.io/fasstr/reference/plot_annual_symbols.html" class="external-link"><code>plot_annual_symbols()</code></a>.</li>
</ul>
</li>
<li>
<strong>Data Availability Plot</strong>
<ul>
<li>Summary of the percent amount of missing data for each month for all years. Can change the plot type (tile or bar styles) and months to include on the plot.</li>
<li>fasstr function: <a href="https://bcgov.github.io/fasstr/reference/plot_missing_dates.html" class="external-link"><code>plot_missing_dates()</code></a>.</li>
</ul>
</li>
<li>
<strong>Data Summary Plot</strong>
<ul>
<li>View annual basic summary statistics (mean, maximum, minimum, median, and standard deviations) of the data for screening. If there is missing data for a given year, the plot symbol will be hollow (not red-filled). Can choose which statistics to include on the plot.</li>
<li>fasstr function: <a href="https://bcgov.github.io/fasstr/reference/plot_data_screening.html" class="external-link"><code>plot_data_screening()</code></a>.</li>
</ul>
</li>
<li>
<strong>Data Screening and Availability Summary Table</strong>
<ul>
<li>Tabular summary of all the screening statistics; including number of days and missing days per year, the number of symbols per year (if provided), the basic summary statistics, and the number of missing values for each month of year.</li>
<li>fasstr function: <a href="https://bcgov.github.io/fasstr/reference/screen_flow_data.html" class="external-link"><code>screen_flow_data()</code></a>.</li>
</ul>
</li>
</ul>
<p><strong>Filtering</strong> and <strong>Missing Dates</strong>. If after reviewing your data you find any periods that are problematic and you would like to omit from your analysis, go to <strong>Data &gt;&gt; Loading &amp; Options</strong>, and adjust the dates under “Years and Months”. Similarly, if you have a lot of missing data, you can specify how these values should be handled under “Handling Missing Dates”. See previous section for more descriptions of the options.</p>
</div>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>For an overview of the summary statistics and flow patterns for your selected station, explore the <strong>Overview</strong> tab. This tab will provide the following information:</p>
<ul>
<li>
<strong>Long-term Data Summary</strong> - various statistics summarizing all the provided daily flow data, including the long-term mean annual discharge (LTMAD; mean of all flow values) and selected percentages of LTMAD; a low-flow frequency quantile of a certain duration (rolling average) and return period, default to 30Q20 (30-day low flow with a 20-year return period); and median, maximum, minimum and percentile values of all flow values. Can change some of the statistic options below the table, which may also change the plots on the right. Note the frequency quantile is fitting using a log-Pearson Type III distribution and may not be the best distribtuion for your data; see the Low-Flows Probabilities plot on the bottom right to see how the points fit against the computed curve or the <strong>Analyses &gt;&gt; Volume Frequency</strong> tab for further analysis</li>
<li>
<strong>Months Means Plot</strong> - plots monthly means of all flow values with the LTMAD (and LTMAD percentages) to show annual flow patterns.</li>
<li>
<strong>Annual Means Plot</strong> - plots annual means of all flow values to show long-term changes in annual flows. Plots with the 10th and 90th mean annual flows (can modify percentile in options on bottom left) to show which years are more extreme than others.</li>
<li>
<strong>Annual Means Plot</strong> - plot the…………….</li>
</ul>
<p>fasstr functions</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/calc_longterm_mean.html" class="external-link"><code>calc_longterm_mean()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/calc_longterm_daily_stats.html" class="external-link"><code>calc_longterm_daily_stats()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/compute_frequency_quantile.html" class="external-link"><code>compute_frequency_quantile()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_monthly_means.html" class="external-link"><code>plot_monthly_means()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_annual_means.html" class="external-link"><code>plot_annual_means()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/compute_annual_frequencies.html" class="external-link"><code>compute_annual_frequencies()</code></a></li>
</ul>
</div>
<div class="section level2">
<h2 id="hydrographs">Hydrographs<a class="anchor" aria-label="anchor" href="#hydrographs"></a>
</h2>
<p>Annual hydrographs summarizing flow information across the year to show patterns</p>
<div class="section level3">
<h3 id="daily-and-long-term">Daily and Long-term<a class="anchor" aria-label="anchor" href="#daily-and-long-term"></a>
</h3>
<p>Summary statistics of all years of data group by day of year, monthly daily averages, or monthly monthly averages</p>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_daily_stats.html" class="external-link"><code>calc_daily_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_daily_stats.html" class="external-link"><code>plot_daily_stats()</code></a>
</li>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_longterm_daily_stats.html" class="external-link"><code>calc_longterm_daily_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_longterm_daily_stats.html" class="external-link"><code>plot_longterm_daily_stats()</code></a>
</li>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_longterm_monthly_stats.html" class="external-link"><code>calc_longterm_monthly_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_longterm_monthly_stats.html" class="external-link"><code>plot_longterm_monthly_stats()</code></a>
</li>
<li>note: adding extra lines to plot not base part of function</li>
</ul>
</div>
<div class="section level3">
<h3 id="cumulative">Cumulative<a class="anchor" aria-label="anchor" href="#cumulative"></a>
</h3>
<p>Cumulative summary statistics of all years of data group by day of year, monthly monthly totals</p>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_daily_cumulative_stats.html" class="external-link"><code>calc_daily_cumulative_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_daily_cumulative_stats.html" class="external-link"><code>plot_daily_cumulative_stats()</code></a>
</li>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_monthly_cumulative_stats.html" class="external-link"><code>calc_monthly_cumulative_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_monthly_cumulative_stats.html" class="external-link"><code>plot_monthly_cumulative_stats()</code></a>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="monthly-means">Monthly Means<a class="anchor" aria-label="anchor" href="#monthly-means"></a>
</h3>
<p>plot monthly averages with long-term mean annual discharge (LTMAD)</p>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_monthly_means.html" class="external-link"><code>plot_monthly_means()</code></a></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="annual-statistics">Annual Statistics<a class="anchor" aria-label="anchor" href="#annual-statistics"></a>
</h2>
<p>Various statistics produced on an annual basis (data grouped by years)</p>
<div class="section level3">
<h3 id="summary-statistics">Summary Statistics<a class="anchor" aria-label="anchor" href="#summary-statistics"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_stats.html" class="external-link"><code>calc_annual_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_stats.html" class="external-link"><code>plot_annual_stats()</code></a>
</li>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_stats2.html" class="external-link"><code>calc_annual_stats2()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_stats2.html" class="external-link"><code>plot_annual_stats2()</code></a>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="mean-annual-discharge">Mean Annual Discharge<a class="anchor" aria-label="anchor" href="#mean-annual-discharge"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/calc_annual_stats.html" class="external-link"><code>plot_annual_means()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="maximums-minimums">Maximums &amp; Minimums<a class="anchor" aria-label="anchor" href="#maximums-minimums"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_extremes.html" class="external-link"><code>calc_annual_extremes()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_extremes.html" class="external-link"><code>plot_annual_extremes()</code></a>
</li>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_annual_extremes_year.html" class="external-link"><code>plot_annual_extremes_year()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="timing-of-flows">Timing of Flows<a class="anchor" aria-label="anchor" href="#timing-of-flows"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_flow_timing.html" class="external-link"><code>calc_annual_flow_timing()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_flow_timing.html" class="external-link"><code>plot_annual_flow_timing()</code></a>
</li>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_annual_flow_timing_year.html" class="external-link"><code>plot_annual_flow_timing_year()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="normal-days">Normal Days<a class="anchor" aria-label="anchor" href="#normal-days"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_normal_days.html" class="external-link"><code>calc_annual_normal_days()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_normal_days.html" class="external-link"><code>plot_annual_normal_days()</code></a>
</li>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_annual_normal_days_year.html" class="external-link"><code>plot_annual_normal_days_year()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="total-discharge">Total Discharge<a class="anchor" aria-label="anchor" href="#total-discharge"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li>
<a href="https://bcgov.github.io/fasstr/reference/calc_annual_cumulative_stats.html" class="external-link"><code>calc_annual_cumulative_stats()</code></a> and <a href="https://bcgov.github.io/fasstr/reference/plot_annual_cumulative_stats.html" class="external-link"><code>plot_annual_cumulative_stats()</code></a>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="analyses">Analyses<a class="anchor" aria-label="anchor" href="#analyses"></a>
</h2>
<div class="section level3">
<h3 id="flow-duration-percentiles">Flow Duration &amp; Percentiles<a class="anchor" aria-label="anchor" href="#flow-duration-percentiles"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/plot_flow_duration.html" class="external-link"><code>plot_flow_duration()</code></a></li>
<li><a href="https://bcgov.github.io/fasstr/reference/calc_longterm_daily_stats.html" class="external-link"><code>calc_longterm_daily_stats()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="annual-trends">Annual Trends<a class="anchor" aria-label="anchor" href="#annual-trends"></a>
</h3>
<p>link to user guide fasstr</p>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/compute_annual_trends.html" class="external-link"><code>compute_annual_trends()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="volume-frequency">Volume Frequency<a class="anchor" aria-label="anchor" href="#volume-frequency"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/compute_annual_frequencies.html" class="external-link"><code>compute_annual_frequencies()</code></a></li>
</ul>
</div>
<div class="section level3">
<h3 id="hydat-peak-frequency">HYDAT Peak Frequency<a class="anchor" aria-label="anchor" href="#hydat-peak-frequency"></a>
</h3>
<p>fasstr functions:</p>
<ul>
<li><a href="https://bcgov.github.io/fasstr/reference/compute_hydat_peak_frequencies.html" class="external-link"><code>compute_hydat_peak_frequencies()</code></a></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="using-code-output-from-the-fasstrshiny">Using code output from the fasstrshiny<a class="anchor" aria-label="anchor" href="#using-code-output-from-the-fasstrshiny"></a>
</h2>
<p>loading Rstudio/R and packages see fasstr user guide copying code, running code using tidyverse for manipulation</p>
<p>Every page in this app has an “R Code” tab. This tab shows the R code used to create all the plots and figures on that particular page.</p>
<p>Playing around with this code on your own is a great way to become more familiar with R and fasstr.</p>
<p>First, if you’re brand new to R, consider running through <a href="https://education.rstudio.com/learn/beginner/" class="external-link">a primer on getting started in R and RStudio</a>.</p>
<p>Once you’re comfortable working with basic R scripts, you’re ready to take a stab playing with fasstr code!</p>
<div class="section level3">
<h3 id="loading-packages">Loading packages<a class="anchor" aria-label="anchor" href="#loading-packages"></a>
</h3>
<p>First, you’ll need to make sure you have the right packages loaded. If you’ve already installed the fasstrshiny package (as above) and have been using fasstrshiny locally, you’re good to go. Otherwise, install fasstr and the HYDAT database using the instructions above.</p>
<pre><code><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bcgov.github.io/fasstr/" class="external-link">fasstr</a></span><span class="op">)</span> <span class="co"># Loads the packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>  
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></code></pre>
</div>
<div class="section level3">
<h3 id="running-fasstr-code">Running fasstr code<a class="anchor" aria-label="anchor" href="#running-fasstr-code"></a>
</h3>
<p>Each series of code starts with a block loading the data (<code>data_flow = ...</code>), either from the HYDAT data base or a local file (see Things to remember, below if loading local data).</p>
<p>To run this code locally, copy all the code, and paste it into a script in RStudio (or similar R IDE).</p>
<p>There is one very important step to do now: <strong>Add <code><a href="https://bcgov.github.io/fasstr/" class="external-link">library(fasstr)</a></code> to the top of the script</strong>. This only needs to be done once per script, and it’s best to put this code at the top of a script since it needs to be loaded before any thing else.</p>
<p>Now you can run the script! It should produce the figures and/or output you see in the fasstrshiny app.</p>
<blockquote>
<p>Note that some complex figures (e.g. hydrographs with added dates and added MAD values) have been modified <em>after</em> the fasstr figure was produced so the code won’t reproduce those figures exactly.</p>
</blockquote>
<p>Saving this script is a great way to keep track of your analyses for future use. You can also share them with colleagues.</p>
</div>
<div class="section level3">
<h3 id="things-to-remember">Things to remember<a class="anchor" aria-label="anchor" href="#things-to-remember"></a>
</h3>
<div class="section level4">
<h4 id="updating-code">
<strong>Updating code</strong><a class="anchor" aria-label="anchor" href="#updating-code"></a>
</h4>
<p>The R code panel generally <em>only</em> shows the last figure you produced. So if you’re on that tab and change a setting, it won’t always be updated in the code. To be safe, <strong>always</strong> look at the figure/table you want to reproduce first, and <em>then</em> grab the code.</p>
<p>This also means that if you don’t look at a tab, the code won’t appear in the R Code tab.</p>
</div>
<div class="section level4">
<h4 id="local-data-1">
<strong>Local data</strong><a class="anchor" aria-label="anchor" href="#local-data-1"></a>
</h4>
<p>If you load a local data set, the R code data block will only show the name of the file. This means that <strong>unless your file is in your working directory</strong> the loading code will error. For a better understanding of working directories, see <a href="https://intro2r.com/work-d.html" class="external-link">An Introduction to R - 1.7 Working directories</a>.</p>
<p>In general, try to work with RStudio projects, and keep your scripts and data together. If your data is in your working directory, you can run the code as is, otherwise you’ll need to modify the file name to include a location.</p>
<p>For example, “test.csv” becomes “data/test.csv” if I have test.csv in a <code>data</code> folder in my working directory.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="settings">Settings<a class="anchor" aria-label="anchor" href="#settings"></a>
</h2>
<p>There are three main areas in which you can adjust the settings in this app.</p>
<p>First, as mentioned above, most settings are in the <strong>Data &gt;&gt; Loading</strong> page. These settings apply to every other page in the app. If you wish to change them, go back to the Data &gt; Loading page and change them, then return to the page you were using.</p>
<p>Second, most pages have specific settings to that set of calculations. You can set these settings on the page in question, they have no bearing on any other calculations (but do apply to all tabs on a page, e.g., Plot and Table).</p>
<p>Finally, plots and tables sometimes have specific settings available by clicking on the “gear” button on the upper right side. These are like the page settings, but even more specific, they only apply the plot or table on that page, on that tab.</p>
</div>
<div class="section level2">
<h2 id="plots-and-tables">Plots and Tables<a class="anchor" aria-label="anchor" href="#plots-and-tables"></a>
</h2>
<p>All plots and table in this app are interactive.</p>
<div class="section level4">
<h4 id="plots-1">
<strong>Plots</strong><a class="anchor" aria-label="anchor" href="#plots-1"></a>
</h4>
<p>You can hover the mouse over any plot to get more information about the values presented.</p>
<p>There are also two plotly plots (Data &gt; Loading &gt; Daily Flows Plot and Data &gt; Available &gt; Symbols Flow) which can be zoomed in on by clicking and dragging over a time period.</p>
<p>Finally, in Analyses &gt; Annual Trends and Analyses &gt; Volume Frequency, you can click on specific points on the plot in order to identify years to omit from the analysis. You can also use the lasso to drag around the points to select a group.</p>
<p>Note that these last two special types of plots each have reminder instructions on the page itself to help you out.</p>
<p><strong>Downloading</strong>. All plots can be downloaded by hovering over the plot and clicking on the small download button that appears in the upper right corner. This button looks like a small camera for plotly plots and a download icon for others. Plots that are relevant for reports also have an additional Plot download button (small blue button with download icon saying “Plot”, usually in the left hand settings tab). This results in a higher quality PNG than the other buttons.</p>
</div>
<div class="section level4">
<h4 id="tables-1">
<strong>Tables</strong><a class="anchor" aria-label="anchor" href="#tables-1"></a>
</h4>
<p>Tables can be sorted by clicking on the desired column and exported to “Excel” or “CSV”. You can also copy the table and paste it into a spreadsheet by clicking the “Copy” button.</p>
<p>One table, the HYDAT stations table in Data &gt; Loading, can also be filtered by typing filter text into the boxes above each column. This results in the HYDAT map showing only filtering stations.</p>
<p>Finally there is another special table in Analyses &gt; Annual Trends. Once a trend analysis has been computed, the plot of a relevant statistic can be viewed by clicking on that statistic in the table. As with other tables you can also sort this table.</p>
</div>
</div>
<div class="section level2">
<h2 id="bookmarking">Bookmarking<a class="anchor" aria-label="anchor" href="#bookmarking"></a>
</h2>
<p>If you wish to save the status of your analysis so you can return to it later, you can click on the “Bookmark” button in the lower right corner of the window.</p>
<p><strong>Note:</strong> While we have made every effort to ensure bookmarking works well, it can be slightly unstable and may not work between versions of this App. We therefore recommend using it as a helper or shortcut tool, rather than relying on it to save all your work as a complete record.</p>
<div class="section level4">
<h4 id="local-bookmarks">
<strong>Local bookmarks</strong><a class="anchor" aria-label="anchor" href="#local-bookmarks"></a>
</h4>
<p>If you are using <code>fasstrshiny</code> from your local computer, this will save the details into a folder called <code>shiny_bookmarks</code> and you’ll get a link like:</p>
<p><code>http://127.0.0.1:7493/?_state_id_=a5fa7412c08683dd</code></p>
<p>The important part that identifies your bookmark is the id <code>a5fa7412c08683dd</code>.</p>
<p>Next time you run <code><a href="../reference/fasstr_shiny.html">fasstr_shiny()</a></code> you might have a different port (here, <code>7493</code>). But if you paste the end of this link <code>?_state_id_=a5fa7412c08683dd</code> to your new url and hit enter, you will recover the bookmark. Give the app a couple of seconds to reset all the inputs.</p>
</div>
<div class="section level4">
<h4 id="shinyapps-io-bookmarks">
<strong>shinyapps.io bookmarks</strong><a class="anchor" aria-label="anchor" href="#shinyapps-io-bookmarks"></a>
</h4>
<p>If you are using <code>fasstrshiny</code> from the web (shinyapps.io), then when you click the bookmark button you will get a VERY long URL. We recommend that you follow the instructions presented to shorten that URL with a service such as <a href="https://tinyurl.com" class="external-link">tinyURL</a>. That url should then work to recover the app in future.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Steffi LaZerte, Jon Goetz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
